!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("search-query-parser",[],t):"object"==typeof exports?exports["search-query-parser"]=t():e["search-query-parser"]=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";
/*!
 * search-query-parser.js
 * Copyright(c) 2014-2020
 * MIT Licensed
 */function r(e){return e.replace(/^\"|\"$|^\'|\'$/g,"")}function o(e){return e.indexOf(" ")>-1?JSON.stringify(e):e}function u(e){return e.replace(/\\(.?)/g,(e,t)=>{switch(t){case"\\":return"\\";case"0":return"\0";case"":return"";default:return t}})}function l(e,t,n){let r=[];if(e.text){let t=[];"string"==typeof e.text?t.push(e.text):t.push.apply(t,e.text),t.length>0&&r.push(t.map(o).map(e=>n+e).join(" "))}return t.keywords&&t.keywords.forEach(t=>{if(!e[t])return;let u=[];"string"==typeof e[t]?u.push(e[t]):u.push.apply(u,e[t]),u.length>0&&r.push(n+t+":"+u.map(o).join(","))}),t.ranges&&t.ranges.forEach(t=>{if(!e[t])return;let o=e[t].from,u=e[t].to;u&&(o=o+"-"+u),o&&r.push(n+t+":"+o)}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=function(e="",t){const n=Object.assign({keywords:[],ranges:[],tokenize:!1,alwaysArray:!1,offsets:!0},t);if(0==n.tokenize&&-1===e.indexOf(":"))return e;if(0!=n.tokenize||null!=n.keywords&&0!==n.keywords.length||null!=n.ranges&&0!==n.ranges.length){let t={options:n},o=[];const l=/(\S+:'(?:[^'\\]|\\.)*')|(\S+:"(?:[^"\\]|\\.)*")|(-?"(?:[^"\\]|\\.)*")|(-?'(?:[^'\\]|\\.)*')|\S+|\S+:\S+/g;let s;for(;null!==(s=l.exec(e));){let e=s[0],t=e.indexOf(":");if(-1!==t){let l=e.slice(0,t),f=e.slice(t+1);const i="-"===l[0];!0===i&&(l=l.slice(1)),f=r(f),f=u(f),-1!==n.keywords.indexOf(l)?o.push({keyword:l,value:f,offsetStart:s.index,offsetEnd:s.index+e.length,exclude:i}):-1!==n.ranges.indexOf(l)?o.push({keyword:l,from:f,to:void 0,offsetStart:s.index,offsetEnd:s.index+e.length,exclude:i}):o.push({text:e,offsetStart:s.index,offsetEnd:s.index+e.length,exclude:i})}else{const t="-"===e[0];!0===t&&(e=e.slice(1)),e=r(e),e=u(e),o.push({text:e,offsetStart:s.index,offsetEnd:s.index+e.length,exclude:t})}}if(o.forEach(e=>{if("text"in e)e.text.length&&(!0===e.exclude?(null==t.exclude&&(t.exclude={}),null!=t.exclude.text?t.exclude.text.push(e.text):t.exclude.text=[e.text]):null!=t.text?t.text.push(e.text):t.text=[e.text],!0===n.offsets&&(null==t.offsets&&(t.offsets=[]),t.offsets.push(e)));else if("value"in e){if(e.value.length){let r=e.value.split(",");!0===e.exclude?(null==t.exclude&&(t.exclude={}),null!=t.exclude[e.keyword]?t.exclude[e.keyword].push(...r):t.exclude[e.keyword]=r):null!=t[e.keyword]?t[e.keyword].push(...r):t[e.keyword]=r,!0===n.offsets&&(null==t.offsets&&(t.offsets=[]),t.offsets.push(e))}}else if("from"in e&&e.from.length){const r=function(e){let t=e.split("-");return 2===t.length?{from:t[0],to:t[1]}:t.length%2==0?(console.error(`Cannot parse multiple pairs of ranges as of now '${JSON.stringify(t)}'`),null):{from:t[0],to:void 0}}(e.from);null!=r&&(!0===e.exclude?(null==t.exclude&&(t.exclude={}),null!=t.exclude[e.keyword]?t.exclude[e.keyword].push(r):t.exclude[e.keyword]=[r]):null!=t[e.keyword]?t[e.keyword].push(r):t[e.keyword]=[r],!0===n.offsets&&(null==t.offsets&&(t.offsets=[]),t.offsets.push(Object.assign(Object.assign({},e),r))))}}),!1===n.tokenize&&(Array.isArray(t.text)&&(t.text=t.text.join(" ").trim()),null!=t.exclude&&Array.isArray(t.exclude.text)&&(t.exclude.text=t.exclude.text.join(" ").trim())),!1===n.alwaysArray){for(let e in t.exclude)"text"!==e&&Array.isArray(t.exclude[e])&&1===t.exclude[e].length&&(t.exclude[e]=t.exclude[e][0]);for(let e in t)"text"!==e&&"exclude"!==e&&"offsets"!==e&&Array.isArray(t[e])&&1===t[e].length&&(t[e]=t[e][0])}return t}return e},t.stringify=function(e){if(!e)return"";if("string"==typeof e)return e;if(0===Object.keys(e).length)return"";let t=[];return null!=e.offsets?e.offsets.forEach(e=>{"text"in e?t.push((!0===e.exclude?"-":"")+o(e.text)):"value"in e?t.push((!0===e.exclude?"-":"")+e.keyword+":"+o(e.value)):"from"in e&&t.push((!0===e.exclude?"-":"")+e.keyword+":"+o(e.from)+(null!=e.to?"-"+o(e.to):""))}):(t=l(e,e.options,""),e.exclude&&Object.keys(e.exclude).length>0&&t.push(...l(e.exclude,e.options,"-"))),t.join(" ")}}])}));
//# sourceMappingURL=search-query-parser.js.map